import{_ as a,y as t,x as i,W as e}from"./plugin-vue_export-helper.86aaabad.js";var s="/assets/1.0717bc5d.png",n="/assets/2.e3abee7e.png",l="/assets/3.12f54fc9.png",o="/assets/14.48cc885e.png",k="/assets/4.f25638da.png",u="/assets/5.0066b353.png",p="/assets/6.5b0e2133.png",r="/assets/7.bb092154.png",m="/assets/8.bc8eafcc.png",c="/assets/9.56145961.png",d="/assets/10.145c1366.png",v="/assets/11.29ba4635.png",h="/assets/15.3602ef5d.png",y="/assets/12.3aa800bc.png",j="/assets/13.0b6ff540.png",E="/assets/16.95acb94d.png",g="data:image/png;base64,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",T="data:image/png;base64,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";const C='{"title":"Relaatiotietokannat","description":"","frontmatter":{},"headers":[{"level":2,"title":"Relaatiotietokannat","slug":"relaatiotietokannat"},{"level":3,"title":"MySQL / MariaDB","slug":"mysql-mariadb"},{"level":3,"title":"Relaatiotietokantojen rakenne","slug":"relaatiotietokantojen-rakenne"},{"level":3,"title":"MySQL:n k\xE4ytt\xF6 koodarin n\xE4k\xF6kulmasta","slug":"mysql-n-kaytto-koodarin-nakokulmasta"},{"level":3,"title":"Tuntiharjoitus 1.","slug":"tuntiharjoitus-1"},{"level":3,"title":"SQL-kieli","slug":"sql-kieli"},{"level":3,"title":"SQL:n komentoja","slug":"sql-n-komentoja"},{"level":3,"title":"SELECT","slug":"select"},{"level":3,"title":"VERTAILUOPERAATTORIT","slug":"vertailuoperaattorit"},{"level":3,"title":"SUMEA HAKU","slug":"sumea-haku"},{"level":3,"title":"JOINIT","slug":"joinit"},{"level":3,"title":"Perusavain (Primary Key) ja Viiteavain (Foreign Key)","slug":"perusavain-primary-key-ja-viiteavain-foreign-key"},{"level":3,"title":"INNER JOIN","slug":"inner-join"},{"level":3,"title":"LEFT JOIN","slug":"left-join"},{"level":3,"title":"RIGHT JOIN","slug":"right-join"},{"level":3,"title":"FULL JOIN","slug":"full-join"},{"level":3,"title":"JOINeista","slug":"joineista"},{"level":3,"title":"ALIAS (AS)","slug":"alias-as"},{"level":3,"title":"SELF JOIN","slug":"self-join"},{"level":3,"title":"Teht\xE4v\xE4t 1 (palautettava)","slug":"tehtavat-1-palautettava"},{"level":3,"title":"KOOSTEFUNKTIOT (AGGREGATE FUNCTIONS)","slug":"koostefunktiot-aggregate-functions"},{"level":3,"title":"KOOSTEFUNKTIOT JA GROUP BY","slug":"koostefunktiot-ja-group-by"},{"level":3,"title":"KOOSTEFUNKTIOT JA HAVING","slug":"koostefunktiot-ja-having"},{"level":3,"title":"SKALAARIFUNKTIOT (SCALAR FUNCTIONS)","slug":"skalaarifunktiot-scalar-functions"},{"level":3,"title":"ORDER BY","slug":"order-by"},{"level":3,"title":"INSERT","slug":"insert"},{"level":3,"title":"DELETE","slug":"delete"},{"level":3,"title":"UPDATE","slug":"update"},{"level":3,"title":"ALIKYSELY (SUBQUERY)","slug":"alikysely-subquery"},{"level":3,"title":"TEHT\xC4V\xC4T 2 (palautettava)","slug":"tehtavat-2-palautettava"},{"level":2,"title":"TEHT\xC4V\xC4T 3 (palautettava)","slug":"tehtavat-3-palautettava"}],"relativePath":"mysql/index.md","lastUpdated":1693903684149}',b={},f=e('<h2 id="relaatiotietokannat" tabindex="-1">Relaatiotietokannat <a class="header-anchor" href="#relaatiotietokannat" aria-hidden="true">#</a></h2><ul><li><p>Relaatiotietokannat perustuvat tietokantatauluihin, joiden rakenne on m\xE4\xE4ritelty</p><ul><li>m\xE4\xE4rittely tarkoittaa tietokantataulujen sarakkeiden nime\xE4mist\xE4, sen tietotyypin m\xE4\xE4ritt\xE4mist\xE4 jne.</li><li>Relaatiotietokantataulun rakenne on siis strukturoitu, eli tarkkaan etuk\xE4teen m\xE4\xE4ritetty</li><li>vrt. esim. MongoDB collection (vastaa relaatietokannan taulua), joka voi olla strukturoitu, semistrukturoitu tai kokonaan ilman ennakkoon m\xE4\xE4ritelty\xE4 rakennetta</li></ul></li><li><p>Yksitt\xE4inen taulu sis\xE4lt\xE4\xE4 tietoja vain tietyntyyppisist\xE4 kohteista</p><ul><li>esim. asiakas tai lemmikki</li><li>Samaan tauluun ei siis tallennetta ensin asiakastietoja ja yht\xE4kki\xE4 seuraavalle riville lemmikin tietoja</li><li>kaikkien lemmikkien tiedot tallennetaan omaan tauluun ja asiakkaat omaan tauluun</li><li>Taulu koostuu riveist\xE4 ja sarakkeista niin kuin taulukkolaskentadokumenttikin (Excel)</li></ul></li></ul><h3 id="mysql-mariadb" tabindex="-1">MySQL / MariaDB <a class="header-anchor" href="#mysql-mariadb" aria-hidden="true">#</a></h3><ul><li><p>MySQL on relaatiotietokantaohjelmisto, joka on saatavilla sek\xE4 vapaalla GPL-lisenssill\xE4 ett\xE4 kaupallisella linsenssill\xE4</p></li><li><p>Alunperin kehitt\xE4mineet suomalainen Michael &quot;Monty&quot; Widenius ja ruotsalainen David Axmark</p></li><li><p>Ensimm\xE4inen versio julkaistu 1996 ja kehitet\xE4\xE4n edelleen</p></li><li><p>Nykyisin Oraclen omistuksessa</p></li><li><p>MariaDB ilmestyi, kun MySQL siirtyi Oraclen omistukseen</p></li><li><p>MariaDB on MySQL:n avoimen l\xE4hdekoodin versioon pohjautuva tietokantapalvelin</p></li><li><p>Sama kehitt\xE4j\xE4 kuin alkuper\xE4isell\xE4 MySQL:ll\xE4 ja on tarkoituksena olla ns. &#39;drop-in replacement&#39; MySQL:n avoimen l\xE4hdekoodin versiolle</p><ul><li>K\xE4ytt\xE4j\xE4 ei v\xE4ltt\xE4m\xE4tt\xE4 huomaa eroa k\xE4ytt\xE4ess\xE4\xE4n MySQL:\xE4\xE4 / MariaDB:t\xE4</li></ul></li></ul><h3 id="relaatiotietokantojen-rakenne" tabindex="-1">Relaatiotietokantojen rakenne <a class="header-anchor" href="#relaatiotietokantojen-rakenne" aria-hidden="true">#</a></h3><ul><li>Yksitt\xE4inen tietokanta koostuu yhdest\xE4 tai useammasta taulusta</li></ul><ul><li>Periaatteessa voi olla my\xF6s tietokanta, jossa ei ole yht\xE4\xE4n taulua, mutta sitten tietokantakin on sama poistaa</li></ul><ul><li>Taulut koostuvat riveist\xE4 ja sarakkeista</li><li>Taulun sarakkeet ovat ennalta m\xE4\xE4r\xE4ttyj\xE4 tietokannan suunnitteluvaiheessa <ul><li>Jokaisella sarakkeella on tarkkaan suunnitteluvaiheessa m\xE4\xE4ritetty tietotyyppi, esim. kokonaisluku, merkkijono, p\xE4iv\xE4m\xE4\xE4r\xE4 ja aika</li></ul></li></ul><h4 id="taulut" tabindex="-1">Taulut <a class="header-anchor" href="#taulut" aria-hidden="true">#</a></h4><p><img src="'+s+'" alt="mysql"></p><ul><li>Tietokannan taulun voi mielt\xE4\xE4 l\xE4ht\xF6kohtaisesti Excelin taulukkolaskenta sheetiksi. <ul><li>sekin koostuu riveist\xE4 ja sarakkeista</li><li>Exceliss\xE4 sarakkeet on nimetty ennakkoon (A, B, C ....jne), mutta relaatiotietokannan taulun sarakkeet m\xE4\xE4ritet\xE4\xE4n suunnitteluvaiheessa.</li><li>Exceliss\xE4 sarakkeeseen voi antaa mit\xE4 tahansa tietoa (teksti\xE4, numeroita yms.), mutta relaatiotietokannassa jokaisella taulun sarakkeella on tarkkaan ennaakkoon m\xE4\xE4ritetty tietotyyppi <ul><li>jos siis m\xE4\xE4rit\xE4t username-sarakkeen tietotyypiksi merkkijono, siihen ei kirjoittaa kokonaislukua</li></ul></li></ul></li><li>Rivit ovat yksitt\xE4isi\xE4 tietuita, joita taulun sarakkeet m\xE4\xE4ritt\xE4v\xE4t <ul><li>Esim. yo. kuvan esimerkiss\xE4 sarakkeet ovat: <ul><li>id (kokonaisluku)</li><li>username (merkkijono)</li><li>role (merkkijono)</li></ul></li><li>ja yksitt\xE4isen k\xE4ytt\xE4j\xE4n tiedot ovat aina samalla rivill\xE4. Esimerkiss\xE4 on siis 3 eri k\xE4ytt\xE4j\xE4\xE4</li></ul></li></ul><h4 id="vertailukohtana-mongodb" tabindex="-1">Vertailukohtana MongoDB <a class="header-anchor" href="#vertailukohtana-mongodb" aria-hidden="true">#</a></h4><ul><li>Relaatiotietokannassa taulussa on tarkkaan m\xE4\xE4r\xE4tty rakenne (sarakkeiden nimet ja niiden tietotyypit) <ul><li>taulun skeemaan voi kuulua my\xF6s muita rajoittavia tekij\xF6it\xE4 (esim. unique-indeksi), mutta n\xE4ist\xE4 vasta my\xF6hemmin lis\xE4\xE4</li></ul></li><li>MongoDB:ss\xE4 ei ole t\xE4llaista tarkkaan m\xE4\xE4ritetty\xE4 skeemaa, vaan tietotyypit voivat vaihdella dokumenttien v\xE4lill\xE4</li></ul><p><img src="'+n+`" alt="mongodb"></p><ul><li>yo. kuvassa on vastaanlaista k\xE4ytt\xE4j\xE4dataa MongoDB-collectionissa (collection vastaa relaatiotietokannan taulua) <ul><li>huomaa kuvassa keltaisella korostettu username-kentt\xE4: ylemm\xE4ll\xE4 k\xE4ytt\xE4j\xE4ll\xE4 username on merkkijono, alemmalla se on numero</li><li>relaatiotietokannoissa t\xE4m\xE4 ei ole mahdollista, koska jokaisella sarakkeella on tarkkaan m\xE4\xE4ritetty tietotyyppi, ei ole mahdollista sekoittaa eri tietotyyppej\xE4 samaan sarakkeeseen</li><li>MongoDB:ss\xE4 tiedon eheyden yll\xE4pit\xE4misest\xE4 vastataan koodin puolella, relaatiotietokannassa n\xE4m\xE4 ovat sis\xE4\xE4nrakennettuja ominaisuuksia, eik\xE4 niit\xE4 tarvitse erikseen koodata</li></ul></li></ul><h3 id="mysql-n-kaytto-koodarin-nakokulmasta" tabindex="-1">MySQL:n k\xE4ytt\xF6 koodarin n\xE4k\xF6kulmasta <a class="header-anchor" href="#mysql-n-kaytto-koodarin-nakokulmasta" aria-hidden="true">#</a></h3><ul><li><p>Tiedonhallinta on paljon muutakin kuin pelk\xE4st\xE4\xE4n tietojen hakemista, tallentamista, muokkaamista ja poistoa tietokannasta, mutta t\xE4ll\xE4 opintojaksolla keskitymme enemm\xE4n niihin tietokantojen ominaisuuksiin, mit\xE4 koodarit tarvitsevat ja j\xE4t\xE4mme v\xE4hemm\xE4lle / kokonaan pois tietokantojen hallinnointiin liittyv\xE4t asiat (database administrator on ihan oma ty\xF6ns\xE4, jota pit\xE4\xE4 k\xE4sitell\xE4 toisella opintojaksolla)</p></li><li><p>Aloitamme tekem\xE4ll\xE4 kyselyj\xE4 valmiiseen tietokantaan ja vasta my\xF6hemmin keskitymme tietokannan suunnitteluun</p><ul><li>Suunnitteluun k\xE4yt\xE4mme MySQL Workbench-sovellusta</li></ul></li></ul><h3 id="tuntiharjoitus-1" tabindex="-1">Tuntiharjoitus 1. <a class="header-anchor" href="#tuntiharjoitus-1" aria-hidden="true">#</a></h3><div class="info custom-block"><p class="custom-block-title">Ennakkovaatimukset</p><p>Tarvitset t\xE4t\xE4 varten PHP MyAdmin-sovelluksen. Katso <a href="/softwares/" target="_blank">t\xE4\xE4lt\xE4</a> asennusohjeet, jos et ole sit\xE4 jo asentanut</p></div><ul><li>Avaa PHP MyAdmin</li><li>Kirjaudu opintojakson ty\xF6tilaan Moodlessa <ul><li><p>hae materiaaleista git-repositorion linkist\xE4 tuntiharjoiuts1.sql ja katso videolta, miten saat sql-tiedostosta tietokannan itsellesi</p><ul><li>T\xE4ss\xE4 vaiheessa, koska keskitymme kyseyjen tekemiseen, k\xE4yt\xE4mme valmista tietokantaa, jossa on vain yksi taulu</li></ul></li></ul></li></ul><div class="info custom-block"><p class="custom-block-title">lopputulos</p><p>Lopputuloksena sinulla pit\xE4isi olla tietokanta tuntiharjoitus1, jossa yksi taulu: users ja siell\xE4 2 k\xE4ytt\xE4j\xE4\xE4</p></div><h3 id="sql-kieli" tabindex="-1">SQL-kieli <a class="header-anchor" href="#sql-kieli" aria-hidden="true">#</a></h3><ul><li><p>Idea relaatiotietokannoista syntyi jo 70-luvulla, jolloin IBM:n insin\xF6\xF6ri kirjoitti tutkielman siit\xE4, miten relaatiotietokannat voisivat toimia. Silloisissa IBM:n k\xE4ytt\xE4miss\xE4 tietokantamalleissa oli omat ongelmansa tallennettavan datan suhteiden mallintamisessa ja tutkielma pureutui t\xE4h\xE4n ongelmaan. Kesti kuitenkin viel\xE4 vuosia ennen kuin t\xE4m\xE4n tutkielman pohjalta kehitettiin ensimm\xE4inen relaatiotietokanta siin\xE4 samalla my\xF6s kieli, jolla tuota relaatiotietokantapalvelinohjelmistoa voidaan k\xE4ytt\xE4\xE4</p></li><li><p>SQL tulee sanoista Structured Query Language</p><ul><li>rakenteellinen kyselykieli</li><li>SQL-kieli on ISO-standardoitu jo vuonna 1986</li></ul></li><li><p>Koska SQL-kieli on standardoitu jo vuonna 1986, se on levinnyt k\xE4ytt\xF6\xF6n kaikkiin relaatiotietokanntaohjelmistoihin. Eri relaatiotietokantavalmistajilla (esim. Oracle, Microsoft, yms.) on omat mausteensa, jolla tavoittelevat kilpailuetua, mutta jokaisen valmistajan tuotteet noudattavat 80-luvulla m\xE4\xE4ritetty\xE4 standardia. T\xE4t\xE4 voisi verrata siihen, ett\xE4 luokallinen ihmisi\xE4 puhuu suomea (samaa kielt\xE4 = SQL), mutta eri osista Suomea kotoisin olevilla ihmisill\xE4 on eri murre. Pienist\xE4, eri murteiden tuomista eroista huolimatta kaikki puhuvat kuitenkin samaa kielt\xE4 ja ymm\xE4rt\xE4v\xE4t siksi toisiaan.</p></li></ul><h3 id="sql-n-komentoja" tabindex="-1">SQL:n komentoja <a class="header-anchor" href="#sql-n-komentoja" aria-hidden="true">#</a></h3><pre><code>* Keskitymme lihavoituihin, koska niit\xE4 koodari tarvitsee eniten.
* Tutustumme my\xF6s commitiin ja rollbackiin
</code></pre><h4 id="dcl-data-control-language" tabindex="-1">DCL (Data Control Language) <a class="header-anchor" href="#dcl-data-control-language" aria-hidden="true">#</a></h4><ul><li>grant (voidaan esim. antaa k\xE4ytt\xE4jille oikeuksia tietokantoihin)</li><li>revoke (voidan esim. peruuttaa grantilla annettuja oikeuksia)</li></ul><h4 id="ddl-data-definition-language" tabindex="-1">DDL (Data Definition Language) <a class="header-anchor" href="#ddl-data-definition-language" aria-hidden="true">#</a></h4><ul><li>create (luodaan tietokanta, taulu, view ym.)</li><li>drop (voidaan poistaa tietokanta, taulu, view ym.)</li><li>rename (voidaan esim. nimet\xE4 uudelleen taulu tai taulun sarake)</li><li>truncate (niin kuin drop, mutta tyhjent\xE4\xE4, ei poista taulua)</li></ul><h4 id="tcl-trnasaction-control-language" tabindex="-1">TCL (Trnasaction Control Language) <a class="header-anchor" href="#tcl-trnasaction-control-language" aria-hidden="true">#</a></h4><ul><li>commit</li><li>rollback</li></ul><h4 id="dql-data-query-language" tabindex="-1">DQL (Data Query Language) <a class="header-anchor" href="#dql-data-query-language" aria-hidden="true">#</a></h4><ul><li><b>select (haetaan tietokannasta tietoja)</b></li></ul><h4 id="dml-data-modification-language" tabindex="-1">DML (Data Modification Language) <a class="header-anchor" href="#dml-data-modification-language" aria-hidden="true">#</a></h4><ul><li><b>insert (voidaan esim. lis\xE4t\xE4 rivej\xE4 tauluun)</b></li><li><b>update (voidaan muokata oo. rivi\xE4 / rivej\xE4 taulussa)</b></li><li><b>delete (voidaan poistaa rivi / rivej\xE4 taulusta)</b></li></ul><h3 id="select" tabindex="-1">SELECT <a class="header-anchor" href="#select" aria-hidden="true">#</a></h3><ul><li>SELECT-lauseella haetaan tietoja kannasta. Select ei muokkaa, lis\xE4\xE4, eik\xE4 poista tietoja kannasta</li></ul><p><img src="`+l+`" alt="mongodb"></p><ul><li><p>SELECT-lausekkeessa on aina sama kaava:</p><ul><li>alkaa avainsanalla SELECT</li><li>sen j\xE4lkeen listataan sarakkeet, jotka halutaan hakea</li><li>sen j\xE4lkeen tulee FROM [taulun nimi]</li></ul></li><li><p>jos haluat hakea kaikki sarakkeet taulusta, voit k\xE4ytt\xE4\xE4 my\xF6s t\xE4hte\xE4 * merkkaamaan kaikkia sarakkeita</p></li></ul><div class="language-bash"><pre><code><span class="token comment"># t\xE4m\xE4 sql-lauseke hakee users taulusta kaikki k\xE4ytt\xE4j\xE4t.</span>
<span class="token comment"># lopputulos on t\xE4ysin sama kuin yo. kuvan kyselyss\xE4</span>

SELECT * FROM <span class="token function">users</span><span class="token punctuation">;</span>

</code></pre></div><div class="tip custom-block"><p class="custom-block-title">VRT MongoDB</p><p>db.users.find()</p></div><ul><li>Esimerkiksi MongoDB:ss\xE4 on yhden rivin hakua varten findOne-funktio, mutta SQL-kieless\xE4 ei ole SELECT ONE-avainsanaa vaan ainoastaan SELECT haettiin sitten yht\xE4 tai useampaa rivi\xE4.</li><li>SQL-kieless\xE4 haun rajauksen voi tehd\xE4 esimerkiksi k\xE4ytt\xE4en LIMIT-avainsamaa</li></ul><div class="language-bash"><pre><code>    SELECT * FROM <span class="token function">users</span> LIMIT <span class="token number">0</span>, <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">VRT MongoDB</p><p>db.users.findOne()</p></div><h4 id="limit" tabindex="-1">LIMIT <a class="header-anchor" href="#limit" aria-hidden="true">#</a></h4><p>LIMIT-avainsana hyv\xE4ksyy kaksi kokonaislukua</p><ul><li>ensimm\xE4inen on OFFSET eli se, mist\xE4 l\xE4hdet\xE4\xE4n liikkeelle</li><li>toinen on ROWCOUNT eli kuinka monta rivi\xE4 haetaan tulokseen</li></ul><p>Esim. <i>SELECT * FROM users LIMIT 0,1</i> hakee ensimm\xE4isen, koska OFFSET on nolla, niin l\xE4hdet\xE4\xE4n ensimm\xE4isest\xE4 liikkeelle ja ROWCOUNT on 1, niin haetaan vain yksi</p><div class="language-bash"><pre><code><span class="token comment"># ao. rivi hakee toisen k\xE4ytt\xE4j\xE4n, koska OFFSET on 1, hyp\xE4t\xE4\xE4n yksi k\xE4ytt\xE4j\xE4 yli</span>

SELECT * FROM <span class="token function">users</span> LIMIT <span class="token number">1,1</span>

</code></pre></div><h4 id="where" tabindex="-1">WHERE <a class="header-anchor" href="#where" aria-hidden="true">#</a></h4><ul><li>WHERE-avainsanalla kyselyyn voi lis\xE4t\xE4 rajaavia ehtoja <ul><li>rajaavina ehtoina voi k\xE4ytt\xE4\xE4 taulun sarakkeita</li></ul></li></ul><div class="language-bash"><pre><code>    <span class="token comment"># Haetaan k\xE4ytt\xE4j\xE4, jonka id-sarakkeen arvo on 1</span>
    <span class="token comment"># Huom, koska id on perusavain (Primary Key), id:n arvo on jokaselle k\xE4ytt\xE4j\xE4lle yksil\xF6llinen. T\xE4m\xE4n kyselyn tuloksena tulee siis vain yksi k\xE4ytt\xE4j\xE4</span>
    SELECT * FROM <span class="token function">users</span> WHERE <span class="token function">id</span> <span class="token operator">=</span> <span class="token number">1</span>

    <span class="token comment"># haetaan k\xE4ytt\xE4j\xE4, jonka etunimi on jorma</span>
    <span class="token comment"># T\xE4m\xE4n kyselyn tuloksena voi tulla useita k\xE4ytt\xE4ji\xE4, koska useammalla ihmisell\xE4 voi olla sama etunimi</span>
    SELECT * FROM <span class="token function">users</span> WHERE first_name <span class="token operator">=</span> <span class="token string">&#39;jorma&#39;</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">VRT MongoDB</p><p>Koska yo. esimerkiss\xE4 <i>SELECT * FROM users WHERE id = 1</i> kysely palauttaa aina vaan yhden k\xE4ytt\xE4j\xE4n, voimme k\xE4ytt\xE4\xE4 siin\xE4 findOne-funktiota ja <i>SELECT * FROM users WHERE first_name = &#39;jorma&#39;</i> voi palauttaa useamman tuloksen, joten k\xE4yt\xE4mme siin\xE4 find-metodia</p></div><div class="language-bash"><pre><code><span class="token comment"># hetaan k\xE4ytt\xE4j\xE4 k\xE4ytt\xE4en yksil\xF6llist\xE4 _id-saraketta MongoDB-tietokannasta</span>

db.users.findOne<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;_id&#39;</span><span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&#39;63b40c56a16aafe7015b2fc4&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># haetaan k\xE4ytt\xE4j\xE4(t) jonka / joiden etunimi on jorma</span>

db.users.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;first_name&#39;</span><span class="token builtin class-name">:</span> <span class="token string">&#39;jorma&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h4 id="or-ja-and" tabindex="-1">OR ja AND <a class="header-anchor" href="#or-ja-and" aria-hidden="true">#</a></h4><ul><li>Ehtoja voi my\xF6s yhdistell\xE4 k\xE4ytt\xE4en OR:ia ja AND:ia kuten Pythonissakin</li></ul><div class="language-bash"><pre><code><span class="token comment"># Haetaan kaikkien k\xE4ytt\xE4jien etunimi, joiden etunimi on Matti tai Juhani</span>
SELECT first_name, last_name FROM <span class="token function">users</span> WHERE first_name <span class="token operator">=</span> <span class="token string">&#39;Juhani&#39;</span> OR first_name <span class="token operator">=</span> <span class="token string">&#39;Matti&#39;</span> 

</code></pre></div><div class="language-bash"><pre><code><span class="token comment"># Haetaan kaikkien k\xE4ytt\xE4jien roolit, joiden etunimi on Juhani ja sukunimi Kuru</span>
SELECT role FROM <span class="token function">users</span> WHERE first_name <span class="token operator">=</span> <span class="token string">&#39;Juhani&#39;</span> AND last_name <span class="token operator">=</span> <span class="token string">&#39;Kuru&#39;</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">SULUILLA VOIT MUUTTAA EHTOJEN VAIKUTUSTA KYSELYN TULOKSEEN</p><p>Hae git-reposta Moodlen kautta tiedonhallinta_harjoitus.sql-tiedosto ja tuo se PhpMyAdminilla koneelle Suorita seuraavat kyselyt PhpMyAdminissa</p></div><div class="language-bash"><pre><code><span class="token number">1</span>. SELECT * FROM employees WHERE first_name <span class="token operator">=</span> <span class="token string">&#39;juhani&#39;</span> OR last_name <span class="token operator">=</span> <span class="token string">&#39;kuru&#39;</span> AND department_id <span class="token operator">=</span> <span class="token number">2</span> 
</code></pre></div><p>Saamasi tulos voi hieman vaihdella ao. kuvan tulokseta, koska tiedot taulussa voivat vaihdella.</p><p><img src="`+o+`" alt="mysql"></p><p>Mutta tuloksessa oleellista on, ett\xE4 saat vastauksena my\xF6s muita kuin department_id 2:n ty\xF6ntekij\xF6it\xE4.</p><p>T\xE4m\xE4 johtuu siit\xE4, ett\xE4 AND-ehto vaikuttaa vain niihin, joiden last_name-sarakkeessa on kuru (eli tuloksessa kaikki, joiden sukunimi on kuru department_id on 2, mutta tuloksena voi tulla muitakin department_id:n arvoja)</p><div class="language-bash"><pre><code><span class="token number">2</span>. SELECT * FROM employees WHERE first_name <span class="token operator">=</span> <span class="token string">&#39;juhani&#39;</span> AND department_id <span class="token operator">=</span> <span class="token number">2</span> OR last_name <span class="token operator">=</span> <span class="token string">&#39;kuru&#39;</span> AND department_id <span class="token operator">=</span> <span class="token number">2</span> 
</code></pre></div><p>Kun suoritat yo. kyselyn numero 2, se hakee vain department_id 2:n ty\xF6ntekij\xF6it\xE4, joiden etunimi on juhani tai sukunimi on kuru, mutta molemmissa tapauksissa kaikki ty\xF6skentelev\xE4t osastolla #2</p><div class="language-bash"><pre><code><span class="token number">3</span>. SELECT * FROM employees WHERE <span class="token punctuation">(</span>first_name <span class="token operator">=</span> <span class="token string">&#39;juhani&#39;</span> OR last_name <span class="token operator">=</span> <span class="token string">&#39;kuru&#39;</span><span class="token punctuation">)</span> AND department_id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre></div><p>Kyselyll\xE4 numero 3 on sama tulos, kuin kyselyll\xE4 numero 2, mutta se on lyhempi, koska sulut muuttavat ehtojen tulkintaa</p><h3 id="vertailuoperaattorit" tabindex="-1">VERTAILUOPERAATTORIT <a class="header-anchor" href="#vertailuoperaattorit" aria-hidden="true">#</a></h3><ul><li>= (yht\xE4 suuri kuin) <ul><li>huomaa, ett\xE4 ohjelmointikieliss\xE4 vertailussa k\xE4ytet\xE4\xE4n kahta yht\xE4suuruusmerkki\xE4 (==) ja sijoituksessa yht\xE4 (=) SQL-kieless\xE4 yht\xE4suuruuden vertailussa k\xE4ytet\xE4\xE4n kuitenkin yht\xE4</li></ul></li></ul><div class="language-bash"><pre><code>SELECT first_name FROM <span class="token function">users</span> WHERE first_name <span class="token operator">=</span> <span class="token string">&#39;jorma&#39;</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>eri suuri kuin != tai &lt;&gt;</li></ul><div class="language-bash"><pre><code>    SELECT first_name FROM <span class="token function">users</span> WHERE first_name <span class="token operator">!=</span> <span class="token string">&#39;jorma&#39;</span><span class="token punctuation">;</span>
    SELECT first_name FROM <span class="token function">users</span> WHERE first_name <span class="token operator">&lt;&gt;</span> <span class="token string">&#39;jorma&#39;</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>suurempi kuin (&gt;)</li><li>suurempi tai yht\xE4 suurin kuin (&gt;=)</li><li>pienempi kuin (&lt;)</li><li>pienempi tai yht\xE4 suuri kuin (&lt;=)</li><li>BETWEEN AND</li></ul><div class="language-bash"><pre><code>    <span class="token comment"># haetaan kaikki ty\xF6ntekij\xE4t employees taulusta, joiden palkka on v\xE4hint\xE4\xE4n 3000 euroa ja enint\xE4\xE4n 5000 kuukaudessa</span>
    SELECT monthly_pay FROM employees WHERE monthly_pay BETWEEN <span class="token number">3000</span> AND <span class="token number">5000</span>
    <span class="token comment"># sama kuin </span>
    SELECT monthly_pay FROM employees WHERE monthly_pay <span class="token operator">&gt;=</span> <span class="token number">3000</span> monthly_pay <span class="token operator">&lt;=</span> <span class="token number">5000</span>
</code></pre></div><ul><li>IN <ul><li>NOT IN k\xE4\xE4nt\xE4\xE4 hakuehdon</li></ul></li></ul><div class="language-bash"><pre><code>SELECT * FROM <span class="token function">users</span> WHERE <span class="token function">id</span> IN <span class="token punctuation">(</span><span class="token number">1,2</span><span class="token punctuation">)</span>
<span class="token comment"># sama kuin</span>
SELECT * FROM <span class="token function">users</span> WHERE <span class="token function">id</span> <span class="token operator">=</span> <span class="token number">1</span> OR <span class="token function">id</span> <span class="token operator">=</span> <span class="token number">2</span>
</code></pre></div><ul><li><p>IS NULL</p><ul><li>IS NOT NULL k\xE4\xE4nt\xE4\xE4 hakuehdon</li><li>Oletuksena relaatiotietokannan taulujen jokainen sarake on pakollinen tarkoittaen sit\xE4, ettei saraketta voi j\xE4tt\xE4\xE4 tyhj\xE4ksi! On kuitenkin ihan tavallista, ett\xE4 osa tiedoista on vapaaehtoisia (eli ne voidaan j\xE4tt\xE4\xE4 tyhjiksi). Relaatiotietokantataulun sarake pit\xE4\xE4 erikseen merkata nullableksi, jos sen saa j\xE4tt\xE4\xE4 tyhj\xE4ksi. Kun taulun sarake j\xE4tet\xE4\xE4n tyhj\xE4ksi sen arvoksi tulee NULL</li><li>NULL arvoa ei voi verrata totuttuun tapaan yht\xE4\xE4suuruus (=) / erisuuruusoperaattoreilla (!= tai &lt;&gt;) vaan sit\xE4 varten on oma vertailu IS NULL / IS NOT NULL</li></ul></li><li><p>Kuvitellaan tilanne, ett\xE4 koodaat sivustoa, jossa rekister\xF6itymislomakkeella kysyt\xE4\xE4n rekister\xF6ityv\xE4n k\xE4ytt\xE4j\xE4n siviilis\xE4\xE4ty\xE4 (profile_information taulussa marital_status-sarake). Koska kaikki eiv\xE4t halua kertoa siviilis\xE4\xE4ty\xE4\xE4n, k\xE4ytt\xE4j\xE4lle pit\xE4\xE4 antaa mahdollisuus olla kertomatta, joten marital_status-sarake voi olla nullable, muut vaihtoehdot voivat olla married, divorced, single, not_married</p></li></ul><div class="language-bash"><pre><code><span class="token comment"># emme ole viel\xE4 k\xE4yneet SQL-kielen sis\xE4\xE4nrakennettuja funktiota l\xE4pi, </span>
<span class="token comment"># mutta COUNT on yksi sellainen. COUNT funktio laskee sarakkeiden lukum\xE4\xE4r\xE4n</span>
<span class="token comment"># eli t\xE4m\xE4 kysely palauttaa k\xE4ytt\xE4jien m\xE4\xE4r\xE4n, </span>
<span class="token comment"># jotka eiv\xE4t ole halunneet kertoa siviilis\xE4\xE4ty\xE4\xE4n (marital_status on NULL)</span>
SELECT COUNT<span class="token punctuation">(</span>id<span class="token punctuation">)</span> FROM profile_information WHERE marital_status IS NULL

<span class="token comment"># t\xE4m\xE4 taas palauttaa k\xE4ytt\xE4jien m\xE4\xE4r\xE4n, </span>
<span class="token comment"># jotka ovat kertoneet (voi siis olla married, divorced, single tai not_married)</span>
SELECT COUNT<span class="token punctuation">(</span>id<span class="token punctuation">)</span> FROM profile_information WHERE martial_status IS NOT NULL
</code></pre></div><h3 id="sumea-haku" tabindex="-1">SUMEA HAKU <a class="header-anchor" href="#sumea-haku" aria-hidden="true">#</a></h3><h4 id="like-ja" tabindex="-1">LIKE ja % <a class="header-anchor" href="#like-ja" aria-hidden="true">#</a></h4><ul><li>LIKE on hakuoperaattori, jota yhdess\xE4 %-merkin kanssa voidaan k\xE4ytt\xE4\xE4 sumeaan hakuun</li></ul><div class="language-bash"><pre><code>    SELECT first_name FROM <span class="token function">users</span> WHERE first_name LIKE <span class="token string">&#39;j%&#39;</span>
</code></pre></div><ul><li>hae etunimi users-taulusta kaikilta joiden etunimi alkaa j:ll\xE4 ja sen j\xE4lkeen voi tulla mit\xE4 tahansa kirjaimia</li></ul><div class="language-bash"><pre><code>    SELECT first_name FROM <span class="token function">users</span> WHERE first_name LIKE <span class="token string">&#39;%j%&#39;</span>
</code></pre></div><ul><li>hae etunimi users-taulusta kaikilta joiden etunimess\xE4 on j-kirjain</li></ul><h4 id="alaviiva" tabindex="-1">_ (ALAVIIVA) <a class="header-anchor" href="#alaviiva" aria-hidden="true">#</a></h4><div class="language-bash"><pre><code>    SELECT first_name FROM <span class="token function">users</span> WHERE first_name LIKE <span class="token string">&#39;_orma&#39;</span>
</code></pre></div><ul><li>kysely hakee kaikki joiden etunimi alkaa mill\xE4 tahansa kirjaimella ja p\xE4\xE4ttyy orma</li></ul><h3 id="joinit" tabindex="-1">JOINIT <a class="header-anchor" href="#joinit" aria-hidden="true">#</a></h3><ul><li>t\xE4h\xE4n asti olemme hakeneet tietoja vain yhdest\xE4 taulusta kerrallaan. On kuitenkin hyvin yleist\xE4, ett\xE4 SELECT-kyselyyn liitet\xE4\xE4n useampia tauluja</li><li>tauluja voidaan liitt\xE4\xE4 yhteen erilaisilla JOINeilla: <ul><li>INNER JOIN (tarvii k\xE4yt\xE4nn\xF6ss\xE4 joka p\xE4iv\xE4 t\xF6iss\xE4, jos tekee tietokantojen kanssa hommia)</li><li>LEFT JOIN (t\xE4t\xE4kin tarvii k\xE4yt\xE4nn\xF6ss\xE4 joka p\xE4iv\xE4)</li><li>RIGHT JOIN <ul><li>sama kuin LEFT JOIN, mutta taulut kyselyss\xE4 eri j\xE4rjestyksess\xE4</li><li>kaikki relaatiotietokantamoottorit eiv\xE4t edes tunnista RIGHT JOIN:ia</li></ul></li><li>FULL OUTER JOIN <ul><li>en ole milloinkaan tarvinnut oikeasti t\xF6iss\xE4</li></ul></li></ul></li></ul><p>Ennen kuin perehdyt\xE4\xE4n tarkemmin erilaisiin JOINeihin, katsotaan, miten eri tauluissa olevat rivit voidaan &quot;liitt\xE4\xE4 toisiinsa&quot;</p><h3 id="perusavain-primary-key-ja-viiteavain-foreign-key" tabindex="-1">Perusavain (Primary Key) ja Viiteavain (Foreign Key) <a class="header-anchor" href="#perusavain-primary-key-ja-viiteavain-foreign-key" aria-hidden="true">#</a></h3><div class="tip custom-block"><p class="custom-block-title">Git-repositorio</p><p>Hae git-repositoriosta (linkki Moodlen ty\xF6tilassa) blog.sql-tiedosto ja importaa (tuo) tiedoston sis\xE4lt\xF6 PHPMyAdminilla.</p></div><div class="tip custom-block"><p class="custom-block-title">VRT MongoDB</p><p>Esimerkiksi MongoDB:ss\xE4 voi tallentaa ns. nestattuja, eli sis\xE4kk\xE4isi\xE4, dokumenttej\xE4) kts. kuva.</p></div><p><img src="`+k+'" alt="mysql"></p><ul><li><p>Yo. kuvassa on t\xE4ysin toimiva MongoDB:n tietokantaskeema. Siin\xE4 blogipostaukseen liittyv\xE4t kommentit on tallennettu osaksi postausta. Nestatut dokumentit ovat MongoDB:ss\xE4 paljon k\xE4ytettyj\xE4, mutta relaatiotietokannoissa t\xE4llainen skeema ei ole mahdollista, koska relaatiotietokantataulut eiv\xE4t tue sis\xE4kk\xE4isi\xE4 rivej\xE4</p></li><li><p>Relaatiotietokannoissa toisiinsa liittyv\xE4t datat, jotka eiv\xE4t kuitenkaan voi olla samassa tietokantataulussa liitet\xE4\xE4n toisiinsa perus -ja viiteavaimilla</p></li></ul><h4 id="perusavain" tabindex="-1">Perusavain <a class="header-anchor" href="#perusavain" aria-hidden="true">#</a></h4><div class="info custom-block"><p class="custom-block-title">INFO</p><p>On hyv\xE4 muistaa, ett\xE4 aina kun teet uuden tietokantataulun luot sille ensimm\xE4iseksi perusavaimen</p></div><ul><li>Perusavain on sarake, joka toimii tauluin yksitt\xE4isen rivin yksil\xF6llisen\xE4 tunnisteena (vertaa MongoDB-dokumentin _id-kentt\xE4)</li><li>Perusavaimen tulee olla yksil\xF6llinen</li><li>Joissakin tapauksissa voidaan k\xE4ytt\xE4\xE4 ns. yhdistelm\xE4 eli komposiittiavainta perusavaimena, mutta menn\xE4\xE4n siihen my\xF6hemmin</li><li>Perusavain voi olla my\xF6s luonnostaan yksil\xF6llinen tunniste. K\xE4ytt\xE4ji\xE4 tallennettaessa t\xE4llainen voisi olla vaikka henkil\xF6tunnus (ei ole olemassa kahta eri henkil\xF6, jolla olisi sama henkil\xF6tunnus)</li><li>On kuitenkin parmpi antaa tietokannan huolehtia perusavaimista ja luoda jokaiselle taululle id-kentt\xE4, josta tekee perusavaimen <ul><li>PHPMyAdmin-sovelluksella perusavaimen voi tehd\xE4 sarakkeesta antamalla sille tietotyypiksi INT (kokonaisluku) ja t\xE4pp\xE4\xE4m\xE4ll\xE4 A_I-sarakkeen <ul><li>kun teet kokonaisluku-sarakkeesta A_I-kent\xE4n, sille tulee automaattisesti Indeksi-sarakkeeseen Primary (Primary-indeksi) tarkoittaa Perusavainta</li></ul></li></ul></li></ul><div class="info custom-block"><p class="custom-block-title">A_I</p><p>AI tulee sanoista Auto Increment ja se tarkoittaa automaattisesti kasvavaa j\xE4rjestysnumeroa. Kun lis\xE4\xE4t ensimm\xE4isen k\xE4ytt\xE4j\xE4n, se saa id-kent\xE4n arvoksi 1, toinen saa 2 jne. Koodarin ei tarvitse itse huolehtia siit\xE4, ett\xE4 j\xE4rjestysnumero on oikea, vaan AI takaa sen, ett\xE4 p\xE4\xE4llekk\xE4isyyksi\xE4 ei synny ikin\xE4</p></div><p><img src="'+u+'" alt="mysql"></p><ul><li>Ao kuvassa n\xE4et tuntiharjoitus1-tietokannan users-taulun rakenteen</li></ul><p><img src="'+p+'" alt="mysql"></p><ul><li>Nimi: id <ul><li>huomaa keltainen avain kent\xE4ss\xE4: se tarkoittaa perusavainta</li></ul></li><li>Tyyppi: INT(11) 11 numeroa pitk\xE4 kokonaisluku</li><li>Tyhj\xE4: Ei (Perusavain on aina pakollinen. Kun sarakkeen merkitsee perusavaimeksi, sit\xE4 ei voi j\xE4tt\xE4\xE4 tyhj\xE4ksi)</li><li>Oletusarvo: None (Oletusarvoa ei tarvitse antaa, koska kentt\xE4 on AUTO_INCREMENT)</li><li>Lis\xE4tiedot: AUTO_INCREMENT (MySQL huolehtii sis\xE4isesti siit\xE4, ett\xE4 id-kent\xE4n arvo on aina yksil\xF6llinen)</li></ul><h4 id="viiteavain" tabindex="-1">Viiteavain <a class="header-anchor" href="#viiteavain" aria-hidden="true">#</a></h4><p>Tehd\xE4\xE4n aiemmin n\xE4ytetty blogipostauksista ja kommenteista nyt uudelleen relaatiotietokantaan sopivalla skeemalla</p><p><img src="'+r+'" alt="mysql"></p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Koska relaatiotietokantaan ei voi tallentaa sis\xE4kk\xE4ist\xE4 dataa, kuten aiemmin teimme MongoDB:n esimerkiss\xE4, meid\xE4n pit\xE4\xE4 luoda postauksille oma taulu (posts) ja kommenteille oma taulu (comments) Yo kuvassa n\xE4kyy viiva (relaatio) n\xE4iden kahden taulun v\xE4lill\xE4. Se on vedetty posts-tauklun id-kent\xE4st\xE4 comments-taulun post_id-kentt\xE4\xE4n</p></div><ul><li>T\xE4ss\xE4 yo. esimerkiss\xE4 comments-taulun post_id-sarake on viiteavain. T\xE4m\xE4 viiteavain viittaa posts-taulun id-sarakkeeseen, joka on perusavain.</li><li>comments-talulussa on siis oma perusavaimensa (id-sarake), comment-tekstikentt\xE4 ja post_id-sarake, joka on posts-taulun viiteavain</li></ul><div class="info custom-block"><p class="custom-block-title">INFO</p><p>T\xE4m\xE4 on ns. one-to-many relationship (yhdest\xE4 moneen yhteys). K\xE4yt\xE4nn\xF6ss\xE4 se tarkoittaa sit\xE4, ett\xE4 posts-taulun id-kentt\xE4 on yksil\xF6llinen (samalla id-sarakkeen arvolla voi olla vain yksi postaus), mutta comments-taulun post_id-sarakkeessa voi olla sama posts-taulun id-kent\xE4n arvo usaeamman kerran</p><p>Suomeksi: yhdell\xE4 blogipostauksella voi olla monta kommenttia</p><p><b>Kun p\xE4\xE4semme suunnitteluosioon, tarkastelemme l\xE4hemmin eri relaatiomuotoja, mutta t\xE4ss\xE4 vaiheessa on t\xE4rke\xE4\xE4 ymm\xE4rt\xE4\xE4 tietokantataulujen v\xE4liset yhteydet vain kyselyjen JOINien kannalta</b></p></div><p><img src="'+m+`" alt="mysql"></p><p>Yo. kuvassa on on kaksi taulua vasemmalla comments-taulu ja oikealla posts-taulu. Taulujen rivit on yhdistetty nuolilla niin, ett\xE4 perusavaimien ja viiteavaimien v\xE4liset yhteydet n\xE4kyv\xE4t</p><ul><li><ol><li>postauksella on 2 kommenttia (kommentit 1 ja 2)</li></ol></li><li><ol start="2"><li>postauksella on 1 kommentti (kommentti 3)</li></ol></li><li><ol start="3"><li>postauksella ei ole yht\xE4\xE4n kommenttia</li></ol></li></ul><p>Nyt takaisin JOINEIHIN</p><h3 id="inner-join" tabindex="-1">INNER JOIN <a class="header-anchor" href="#inner-join" aria-hidden="true">#</a></h3><div class="info custom-block"><p class="custom-block-title">Katso kuva INNER JOINista</p><p><a href="https://www.w3schools.com/sql/sql_join_inner.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/sql/sql_join_inner.asp</a></p></div><ul><li>INNER JOIN yhdist\xE4\xE4 kaksi eri taulua yhteen perus -ja viiteavamilla niin, ett\xE4 avainten t\xE4ytyy t\xE4sm\xE4t\xE4</li></ul><div class="info custom-block"><p class="custom-block-title">Suomeksi</p><p>Kun teemme kyselyn jossa haemme INNER JOINia k\xE4ytt\xE4en postaukset ja kommentit, emme n\xE4e postausta #3 ollenkaan, koska siin\xE4 ei ole yht\xE4\xE4n kommenttia, mutta n\xE4emme postauksen #1 kahdesti, koska siin\xE4 on kaksi kommenttia</p></div><div class="language-bash"><pre><code>SELECT posts.id, posts.body, comments.comment FROM posts INNER JOIN comments ON posts.id <span class="token operator">=</span> comments.post_id
</code></pre></div><p><img src="`+c+`" alt="mysql"></p><h3 id="left-join" tabindex="-1">LEFT JOIN <a class="header-anchor" href="#left-join" aria-hidden="true">#</a></h3><div class="info custom-block"><p class="custom-block-title">Katso kuva LEFT JOINista</p><p><a href="https://www.w3schools.com/sql/sql_join_left.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/sql/sql_join_left.asp</a></p></div><ul><li>LEFT JOIN yhdist\xE4\xE4 kaksi eri taulua yhteen perus -ja viiteavamilla niin, ett\xE4 JOININ vasemmalla puolella olevasta taulusta haetaan kaikki, vaikka sit\xE4 t\xE4sm\xE4\xE4v\xE4\xE4 viiteavainta ei olisikaan oikealla puolella olevassa taulussa</li></ul><div class="info custom-block"><p class="custom-block-title">Mik\xE4 ihmeen vasemalla puolella oleva taulu</p><p>LEFT JOINin vasemmalla puolella oleva taulu on se, joka tulee FROM:n j\xE4lkeen</p></div><p>Tehd\xE4\xE4n \xE4skeinen kysely k\xE4ytt\xE4en INNER JOINin sijasta LEFT JOINia</p><p>Nyt n\xE4emme 4 rivi\xE4, koska niin kuin INNER JOINissakin, 1 postaus tulee kahdesti, koska siin\xE4 on kaksi kommenttia. Toinen postaus tulee kerran, koska siin\xE4 on 1 komemntti, mutta toisin kuin INNER JOINissa, n\xE4mme nyt my\xF6s postauksen #3, koska k\xE4yt\xE4mme LEFT JOINia ja posts-taulu on kyselyss\xE4 JOINin vasemmalla puolella.</p><p>Huomaa, ett\xE4 #3 postauksen kohdalla comment-sarake n\xE4ytt\xE4\xE4 NULLia</p><div class="language-bash"><pre><code>SELECT posts.id, posts.body, comments.comment FROM posts LEFT JOIN comments ON posts.id <span class="token operator">=</span> comments.post_id
</code></pre></div><p><img src="`+d+`" alt="mysql"></p><h3 id="right-join" tabindex="-1">RIGHT JOIN <a class="header-anchor" href="#right-join" aria-hidden="true">#</a></h3><p>Ao. kysely palauttaa t\xE4sm\xE4lleen saman tuloksen kuin yo. LEFT JOIN-kysely, mutta taulut ovat bvain eri j\xE4rjestyksess\xE4</p><div class="language-bash"><pre><code>SELECT posts.id, posts.body, comments.comment FROM comments RIGHT JOIN posts ON posts.id <span class="token operator">=</span> comments.post_id<span class="token punctuation">;</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">LEFT vai RIGHT JOIN</p><p>Opettele LEFT JOIN! RIGHT JOINissa ei ole mit\xE4\xE4n muuta eroa kuin taulujen j\xE4rjestys. Useimmiten n\xE4kee k\xE4ytett\xE4v\xE4n LEFT JOINia eik\xE4 RIGHT JOIN edes toimi kaikissa relaatiotietokantatoteutuksissa. RIGHT JOIN ei ole pakollinen, koska sen voi aina korvata LEFT JOINilla</p></div><h3 id="full-join" tabindex="-1">FULL JOIN <a class="header-anchor" href="#full-join" aria-hidden="true">#</a></h3><ul><li>FULL JOIN hakee kaikki rivit JOINien molemmista tauluista.</li></ul><div class="info custom-block"><p class="custom-block-title">INFO</p><p>MariaDB ja MySQL eiv\xE4t tue FULL JOINia. ao. kuvan esimerkki on PostgreSQL:st\xE4</p></div><p><img src="`+v+`" alt="postgres"></p><div class="language-bash"><pre><code>SELECT posts.id, posts.body, comments.comment FROM posts FULL JOIN comments ON posts.id <span class="token operator">=</span> comments.post_id<span class="token punctuation">;</span>
</code></pre></div><div class="info custom-block"><p class="custom-block-title">FULL JOIN</p><p>En ole itse koskaan tarvinnut FULL JOINia miss\xE4\xE4n softassa t\xF6iss\xE4</p></div><h3 id="joineista" tabindex="-1">JOINeista <a class="header-anchor" href="#joineista" aria-hidden="true">#</a></h3><div class="info custom-block"><p class="custom-block-title">INFO</p><p>JOINin j\xE4lkeen tulee taulu, joka halutaan liitt\xE4\xE4 ja sen j\xE4lkeen tulee ON, jossa m\xE4\xE4ritet\xE4\xE4n, mink\xE4 sarakkeiden v\xE4lille yhteys (JOIN) muodostetaan</p><p><i>SELECT taulu1 INNER | LEFT JOIN taulu2 ON taulu1.sarake = taulu2.sarake</i></p></div><ul><li>Onko JOIN aina pakko tehd\xE4 perus -ja viiteavaimen v\xE4lille <ul><li>Ei ole. Tietokantataulussa ei kyselyn toiminnan kannalta tarvitse edes olla perusavainta</li><li><b>Vaikka perusavainta ei tarvitse, tee se kuitenkin aina, koska sill\xE4 on vaikutusta esim. kyselyjen hakunopeuteen ja viite-eheyden automaattiseen yll\xE4pit\xE4miseen</b></li></ul></li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Tuo / importaa git-reposta db_without_primarykeys ja suorita ao. kysely</p></div><div class="language-bash"><pre><code>SELECT * FROM <span class="token function">users</span> INNER JOIN vehicles ON users.email <span class="token operator">=</span> vehicles.email
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">Kun liitett\xE4v\xE4t sarakkeet ovat samalla nimell\xE4, voidaan JOIN-lauseketta lyhent\xE4\xE4</p><p>Voit k\xE4ytt\xE4\xE4 JOINissa ON-avainsanan sijasta USINGia T\xE4m\xE4 onnistuu kuitenkin vain, kun taulujen yhdist\xE4miseen k\xE4ytetyt sarakkeet ovat saman nimiset, jos sarakkeet ovat eri nimill\xE4, pit\xE4\xE4 k\xE4ytt\xE4\xE4 ON-avainsanaa</p></div><div class="language-bash"><pre><code>SELECT * FROM <span class="token function">users</span> INNER JOIN vehicles USING<span class="token punctuation">(</span>email<span class="token punctuation">)</span>
</code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>yo. kyselyss\xE4 liitet\xE4\xE4n JOIN taulujen email-sarakkeisiin. email voi toimia yksil\xF6llisen\xE4 tunnisteena, koska yksi s\xE4hk\xF6postiosoite voi olla vain yhdell\xE4 ihmisell\xE4 kerrallaan. Perus -/ viiteavaimia ei siis tarvita joinien tekemiseen. Riitt\xE4\xE4, ett\xE4 sarakkeissa on samat arvot ja kysely toimii halutulla tavalla.</p></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Ei ole yht\xE4\xE4n hyv\xE4\xE4 syyt\xE4 j\xE4tt\xE4\xE4 perusavainta tekem\xE4tt\xE4 tietokantatauluun, vaikka kyselyt voivat teknisesti toimia ilman niit\xE4. Tee perusavain aina</p><p>Perusavaimen arvo [int(11)] ei muutu ikin\xE4, mutta yo. esimerkiss\xE4 on mahdollista, ett\xE4 k\xE4ytt\xE4j\xE4n s\xE4hk\xF6postiosoite muuttuu. S\xE4hk\xF6postiosoitteen muuttuessa my\xF6s siihen viittaavat rivit muissa tietokantatauluissa t\xE4ytyy p\xE4ivitt\xE4\xE4, tai liitos katoaa.</p></div><h3 id="alias-as" tabindex="-1">ALIAS (AS) <a class="header-anchor" href="#alias-as" aria-hidden="true">#</a></h3><ul><li>Kun k\xE4yt\xE4t INNER / LEFT JOINeja ja liit\xE4t useampia tauluja yhteen, voi olla, ett\xE4 tauluissa on p\xE4\xE4llekk\xE4isi\xE4 sarakkeiden nimi\xE4</li></ul><div class="language-bash"><pre><code>
<span class="token comment"># esimerkiksi t\xE4m\xE4 ao. kysely antaa virheilmoituksen Column \`id\` in WHERE clause is ambiguous</span>

SELECT posts.* FROM posts INNER JOIN comments ON posts.id <span class="token operator">=</span> comments.post_id WHERE <span class="token function">id</span> <span class="token operator">=</span> <span class="token number">1</span>

</code></pre></div><ul><li><p>T\xE4m\xE4 siis tarkoittaa sit\xE4, ett\xE4 WHERE-lausekkeen ehdossa k\xE4ytetty id-sarake on molemmissa tauluissa (sek\xE4 posts ett\xE4 comments, eik\xE4 MySQL tied\xE4, kumman taulun id-sarakkeest\xE4 on kyse)</p></li><li><p>K\xE4yt\xE4 aina taulun nime\xE4 sarakkeen edess\xE4</p></li></ul><div class="language-bash"><pre><code>SELECT posts.* FROM posts INNER JOIN comments ON posts.id <span class="token operator">=</span> comments.post_id WHERE posts.id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">Alias</p><p>Joskus taulujen ja / tai sarakkeiden nimet voivat olla aika pitki\xE4kin ja silloin on hyv\xE4 k\xE4ytt\xE4\xE4 AS-avainsanaa antamaan alias tauluille</p></div><div class="language-bash"><pre><code>SELECT p.* FROM posts AS p INNER JOIN comments AS c ON p.id <span class="token operator">=</span> c.post_id WHERE p.id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>Yo. esimerkiss\xE4 posts-taululla on alias p ja comments-taululla c T\xE4ydet taulujen nimet piti kirjoittaa vain yhden kerran</li></ul><h3 id="self-join" tabindex="-1">SELF JOIN <a class="header-anchor" href="#self-join" aria-hidden="true">#</a></h3><ul><li>SELF JOIN ei ole mik\xE4\xE4n kolmas JOIN-tyyppi INNERin ja LEFTin lis\xE4ksi vaan sill\xE4 tarkoitetaan sit\xE4, kun tehd\xE4\xE4n kysely yhteen tauluun kahdella eri nimell\xE4 k\xE4ytt\xE4en aliaksia</li></ul><div class="tip custom-block"><p class="custom-block-title">Git-reposta</p><p>Tuo tiedot git-repositorion selfjoin (1).sql-tiedostosta</p></div><p>Haetaan kaikki tiedot asiakkaista, niilt\xE4 paikkakunnilta joista on kotoisin v\xE4hint\xE4\xE4n 2 asiakasta</p><div class="language-bash"><pre><code>SELECT * FROM customers AS c1, customers AS c2 WHERE c1.id <span class="token operator">&lt;&gt;</span> c2.id AND c1.city <span class="token operator">=</span> c2.city<span class="token punctuation">;</span>
</code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>yo. kyselyss\xE4 on SELF JOIN, eli teemme kyselyn kahdella eri aliaksella yhteen ja samaan tauluun, jotta voimme tehd\xE4 taulun sis\xE4ll\xE4 vertailuja</p></div><h3 id="tehtavat-1-palautettava" tabindex="-1">Teht\xE4v\xE4t 1 (palautettava) <a class="header-anchor" href="#tehtavat-1-palautettava" aria-hidden="true">#</a></h3><div class="info custom-block"><p class="custom-block-title">Teht\xE4vien palautus</p><p>Teht\xE4v\xE4t pit\xE4\xE4 palauttaa Moodlen palautuslaatikkoon nimelt\xE4 Teht\xE4v\xE4t 1 Palauta yksi (1) txt-tiedosto (huom. ei doc / docx tms.), vaan esim. tehtavat1.txt jossa jokainen vastaus on omalla rivill\xE4\xE4n ao. kuvatussa muodossa</p><p>1.1 SELECT ....;<br> 1.2 SELECT ....;<br> 1.3 SELECT ....;<br></p><p><b>\xC4l\xE4 palauta tulosta, koska tulos voi vaihdella, palauta ainoastaan tekem\xE4si kyselyt yo. muodossa</b></p><ul><li>Saat jokaisesta kyselyst\xE4 1. pisteen, jos se on oikein. V\xE4\xE4rist\xE4 tuloksista saa 0 pistett\xE4.</li><li>Jos palautus ei ole txt-tiedostossa tai vastaukset ovat v\xE4\xE4r\xE4ss\xE4 formaatissa, teht\xE4vi\xE4 ei arvioida ollenkaan</li></ul></div><ul><li>1.1. Tee kysely, joka listaa kaikki ty\xF6ntekij\xE4t</li><li>1.2. Tee kysely, joka listaa kaikki osastot</li><li>1.3 Hae 10. ty\xF6ntekij\xE4 (voit katsoa 10. id:n arvon ja k\xE4ytt\xE4\xE4 id:t\xE4 haussa)</li><li>1.4 Hae viimeisen osaston tiedot (ei tarvitse ty\xF6ntekij\xF6it\xE4) (Voit katsoa viimeisen osaston id-sarakkeen arvon ja k\xE4ytt\xE4\xE4 sit\xE4 rajaamaan hakua)</li><li>1.5 Tee kysely, jolla selvit\xE4t, mik\xE4 on 20. ty\xF6ntekij\xE4n palkka ja etunimi (voit katsoa 20. ty\xF6ntekij\xE4n id:n arvon ja k\xE4ytt\xE4\xE4 sit\xE4 rajaamaan hakua)</li><li>1.6 Tee kysely, jolla selvit\xE4t, mik\xE4 department_id on 12. ty\xF6ntekij\xE4ll\xE4 (hae ty\xF6ntekij\xE4n id:ll\xE4) (tarkoituksena hakea siis pelk\xE4st\xE4\xE4n department_id-sarakkeen arvo)</li><li>1.7 Tee kysely, joka listaa kaikki ty\xF6ntekij\xE4t, joiden sukunimi on kuru</li><li>1.8 Tee kysely, jolla haet departmentin (id 3) kaikki ty\xF6ntekij\xE4t <ul><li>tee kysely pelk\xE4st\xE4\xE4n employees-tauluun k\xE4ytt\xE4en department_id:t\xE4</li></ul></li><li>1.9 Muokkaa ylemp\xE4\xE4 kysely\xE4 niin, ett\xE4 teet INNER JOINin ja k\xE4yt\xE4t nyt WHERE-lausekkeessa ehtona departments.id-saraketta</li></ul><p>Voit saada t\xE4st\xE4 teht\xE4v\xE4paketista yhteens\xE4 9 pistett\xE4, jos kaikki kyselyt ovat oikein</p><h3 id="koostefunktiot-aggregate-functions" tabindex="-1">KOOSTEFUNKTIOT (AGGREGATE FUNCTIONS) <a class="header-anchor" href="#koostefunktiot-aggregate-functions" aria-hidden="true">#</a></h3><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Koostefunktiot koostavat nimens\xE4 mukaisesti monesta arvosta yhden arvon.</p><p>Esimerkiksi AVG()-funktio laskee keskiarvon. Jos ajattelet, miten esimerkiksi todistuksen keskiarvo lasketaan: Laske yhteen kaikkien opintojaksojen arvosanat ja jaa se opintojaksojen lukum\xE4\xE4r\xE4ll\xE4. AVG siis koostaa useasta arvosanasta yhden luvun</p></div><div class="tip custom-block"><p class="custom-block-title">Importaa git-reoposta tiedonhallinta_harjoius.sql</p><p>Jos sinulla ei viel\xE4 ole tiedonhallinta_harjoitus-tietokantaa, importaa se nyt</p></div><div class="tip custom-block"><p class="custom-block-title">Koostefunktioiden kanssa kannattaa k\xE4ytt\xE4\xE4 aliasta sarakkeiden nimiss\xE4</p><p>Koostefunktioita k\xE4ytett\xE4ess\xE4 tuloksessa sarakkeen nimeksi tulee oletuksena k\xE4ytetty koostefunktio ja funktion argumenttina k\xE4ytetty sarake. Aliaksien k\xE4ytt\xF6 parantaa luettavuutta</p></div><div class="info custom-block"><p class="custom-block-title">Koostefunktiot ja WHERE</p><p><b>WHERE-lauseke toimii koostefunktioiden kanssa niin kuin normaaleissakin SELECT-lauseissa. Voit siis rajata WHEREa k\xE4ytt\xE4m\xE4ll\xE4 tulosjoukkoa, johon koostefunktio kohdistuu</b></p><p>HUOM! Et kuitenkaan voi k\xE4ytt\xE4\xE4 WHERE-lausekkeessa koostefunktiota</p><p>ao. kysely ei toimi</p><p>SELECT AVG(salary) FROM <code>employees</code> WHERE avg(salary) &gt; 3000 GROUP BY department_id</p><p>koska siin\xE4 on WHEREss\xE4 AVG-funktio</p><p>GROUP BYsta voit lukea tarkemmin t\xE4\xE4lt\xE4 kohdasta <a href="#koostefunktiot-ja-group-by">KOOSTEFUNKTIOT JA GROUP BY</a></p><p>Lis\xE4tietoja siit\xE4, miten yo. esimerkin kysely saadaan toimimaan, voit lukea t\xE4\xE4lt\xE4 kohdasta <a href="#koostefunktiot-ja-having">HAVING</a></p><p>Jos tarvitset koostefunktion tulosta rajaavana ehtona jossakin kyselyss\xE4 voit tehd\xE4 sen <a href="#alikysely-subquery">alikyselyll\xE4.</a></p></div><h4 id="avg" tabindex="-1">AVG <a class="header-anchor" href="#avg" aria-hidden="true">#</a></h4><ul><li>Lasketaan kaikkien ty\xF6ntekij\xF6iden keskiarvopalkka</li></ul><div class="language-bash"><pre><code>SELECT AVG<span class="token punctuation">(</span>salary<span class="token punctuation">)</span> AS avg_salary FROM employees
</code></pre></div><h4 id="sum" tabindex="-1">SUM <a class="header-anchor" href="#sum" aria-hidden="true">#</a></h4><ul><li>Lasketaan kaikkien ty\xF6ntekij\xF6iden palkat yhteen</li></ul><div class="language-bash"><pre><code>SELECT SUM<span class="token punctuation">(</span>salary<span class="token punctuation">)</span> AS sum_salary FROM employees
</code></pre></div><h4 id="min-max" tabindex="-1">MIN / MAX <a class="header-anchor" href="#min-max" aria-hidden="true">#</a></h4><ul><li>Haetaan kaikkien ty\xF6ntekij\xF6iden joukosta pienin ja isoin palkka</li></ul><div class="language-bash"><pre><code>SELECT MIN<span class="token punctuation">(</span>salary<span class="token punctuation">)</span> AS min_salary, MAX<span class="token punctuation">(</span>salary<span class="token punctuation">)</span> AS max_salary FROM employees
</code></pre></div><ul><li>Lasketaan pienin ja suurin palkka ainoastaan ty\xF6ntekij\xF6ilt\xE4, joiden department_id = 2</li></ul><div class="language-bash"><pre><code>    SELECT MIN<span class="token punctuation">(</span>salary<span class="token punctuation">)</span> AS min_salary, MAX<span class="token punctuation">(</span>salary<span class="token punctuation">)</span> AS max_salary FROM employees WHERE department_id <span class="token operator">=</span> <span class="token number">2</span>
</code></pre></div><h4 id="count" tabindex="-1">COUNT <a class="header-anchor" href="#count" aria-hidden="true">#</a></h4><ul><li>Lasketaan kaikki ty\xF6ntekij\xE4t</li></ul><div class="language-bash"><pre><code>SELECT COUNT<span class="token punctuation">(</span>id<span class="token punctuation">)</span> AS num_of_employees FROM employees
</code></pre></div><ul><li>Lasketaan department_id 2 ty\xF6skentelev\xE4t ty\xF6ntekij\xE4t</li></ul><div class="language-bash"><pre><code>SELECT COUNT<span class="token punctuation">(</span>id<span class="token punctuation">)</span> FROM employees WHERE department_id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="koostefunktiot-ja-group-by" tabindex="-1">KOOSTEFUNKTIOT JA GROUP BY <a class="header-anchor" href="#koostefunktiot-ja-group-by" aria-hidden="true">#</a></h3><ul><li>Koostefunktiot palauttavat oletuksena yhden luvun, mutta t\xE4t\xE4 oletustoimintatapaa voi muuttaa k\xE4ytt\xE4m\xE4ll\xE4 koostefunktiota yhess\xE4 GROUP BY:n kanssa.</li></ul><div class="info custom-block"><p class="custom-block-title">Voit k\xE4ytt\xE4\xE4 GROUP BY:ta n\xE4in</p><p>SELECT COUNT(id) FROM table GROUP BY column</p><p>column on mik\xE4 tahansa taulussa oleva sarakkeen nimi</p></div><div class="language-bash"><pre><code><span class="token comment"># ao. kysely laskee kaikkien ty\xF6ntekij\xF6iden sijaan ty\xF6ntekij\xE4t osastokohtaisesti</span>
SELECT department_id, COUNT<span class="token punctuation">(</span>id<span class="token punctuation">)</span> AS num_of_emp FROM employees GROUP BY department_id<span class="token punctuation">;</span>
</code></pre></div><p><img src="`+h+`" alt="mysql"></p><ul><li>Yo. kuvassa n\xE4kyy ty\xF6ntekij\xF6iden lukum\xE4\xE4r\xE4 osastoittain, koska k\xE4ytimme GROUP BYssa department_id-saraketta. Saimme siis yhden luvun sijasta luvun jokaiselle osastolle</li><li>Kun kaikkien osastojen ty\xF6ntekij\xF6iden lukum\xE4\xE4r\xE4 lasketaan yhteen, saamme tulokseksi 99, joka on kaikkien ty\xF6ntekij\xF6iden lukum\xE4\xE4r\xE4</li></ul><div class="info custom-block"><p class="custom-block-title">INFO</p><p>GROUP BY luo jokaiselle GROUP BYssa k\xE4ytetylle sarakkeen arvolle oman &#39;\xE4mp\xE4rin&#39;, johon rivit lajitellaan. Sitten koostefunktio suoritetaan jokaiselle \xE4mp\xE4rille erikseen</p></div><div class="info custom-block"><p class="custom-block-title">INFO</p><pre><code>Kyselyn GROUP BY:ssa voi k\xE4ytt\xE4\xE4 useampaa saraketta
</code></pre></div><div class="language-bash"><pre><code>    SELECT AVG<span class="token punctuation">(</span>credits<span class="token punctuation">)</span> FROM courses GROUP BY name, year
</code></pre></div><h3 id="koostefunktiot-ja-having" tabindex="-1">KOOSTEFUNKTIOT JA HAVING <a class="header-anchor" href="#koostefunktiot-ja-having" aria-hidden="true">#</a></h3><ul><li>Tehd\xE4\xE4n kysely, jolla saat listattua kaikkien osastojen keskiarvopalkat, jos ne ylitt\xE4v\xE4t 4200</li></ul><div class="language-bash"><pre><code>SELECT department_id, AVG<span class="token punctuation">(</span>salary<span class="token punctuation">)</span> AS avg_salary FROM employees GROUP BY department_id HAVING AVG<span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">4200</span><span class="token punctuation">;</span>
</code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>HAVING-lausekkeessa voit k\xE4ytt\xE4\xE4 koostefunktiota rajaavana ehtona ja HAVING kohdistuu GROUP BY:n &#39;\xE4mp\xE4reihin&#39;</p></div><h3 id="skalaarifunktiot-scalar-functions" tabindex="-1">SKALAARIFUNKTIOT (SCALAR FUNCTIONS) <a class="header-anchor" href="#skalaarifunktiot-scalar-functions" aria-hidden="true">#</a></h3><p>Skalaarifunktion voit suorittaa rivikohtaisesti. Koostefunktiot h\xE4vitt\xE4v\xE4t ne yksitt\xE4iset rivit, joista koostefunktion tulos koostuu, mutta skalaarifunktion tulos suoritetaan jokaiselle tulosjoukon riville</p><h4 id="concat" tabindex="-1">CONCAT <a class="header-anchor" href="#concat" aria-hidden="true">#</a></h4><ul><li>CONCAT yhdist\xE4\xE4 kaksi merkkijonoa</li></ul><div class="language-bash"><pre><code>SELECT CONCAT<span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span>, <span class="token string">&#39;world&#39;</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="upper" tabindex="-1">UPPER <a class="header-anchor" href="#upper" aria-hidden="true">#</a></h4><ul><li>UPPER muuttaa kirjaimet isoiksi</li></ul><div class="language-bash"><pre><code>SELECT UPPER<span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="lower" tabindex="-1">LOWER <a class="header-anchor" href="#lower" aria-hidden="true">#</a></h4><ul><li><p>LOWER muuttaa kirjaimet pieniksi</p><div class="language-bash"><pre><code>SELECT LOWER<span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span>
</code></pre></div></li></ul><h4 id="now" tabindex="-1">NOW <a class="header-anchor" href="#now" aria-hidden="true">#</a></h4><ul><li>NOW palauttaa suoritushetken aikaleiman</li></ul><div class="language-bash"><pre><code>SELECT NOW<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="timestampdiff" tabindex="-1">TIMESTAMPDIFF <a class="header-anchor" href="#timestampdiff" aria-hidden="true">#</a></h4><ul><li>Laskee kahden p\xE4iv\xE4m\xE4\xE4r\xE4n erotuksen annettuna unitteina</li></ul><div class="info custom-block"><p class="custom-block-title">TIMESTAMPDIFF</p><p>TIMESTAMPDIFF(unit, date1, date2)</p></div><p>\`</p><div class="language-bash"><pre><code>SELECT TIMESTAMPDIFF<span class="token punctuation">(</span>HOUR,<span class="token string">&#39;2022-02-01&#39;</span>,<span class="token string">&#39;2022-02-21&#39;</span><span class="token punctuation">)</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">Henkil\xF6n i\xE4n laskeminen</p><p>Ik\xE4 on sellainen tieto, jota ei kannata tallentaa teitokantatauluun kokonaislukuna, koska se muuttuu koko ajan. Kannattaa ennemmin tallentaa syntym\xE4p\xE4iv\xE4 joko DATE, DATETIME tai TIMESTAMPP-tyyppiseen sarakkeeseen ja laskea ik\xE4 siit\xE4 k\xE4ytt\xE4en TIMESTAMPDIFFi\xE4 ja NOW-funktiota</p></div><h3 id="order-by" tabindex="-1">ORDER BY <a class="header-anchor" href="#order-by" aria-hidden="true">#</a></h3><div class="info custom-block"><p class="custom-block-title">INFO</p><p>ORDER BY-lausekkeella voit vaihtaa tulosjoukon j\xE4rjestyst\xE4 T\xE4m\xE4 on hy\xF6dyllist\xE4 esim. juuri koostefunktioiden tulosten listauksessa, koska koostefunktiot h\xE4vitt\xE4v\xE4t yksitt\xE4isten rivien id-kent\xE4t</p><p>ORDER BY toimii n\xE4in: ORDER BY column1, column2 ASC | DESC</p></div><ul><li>Tehd\xE4\xE4n yo. kysely, jossa haettiin kaikki osastot, joiden keskipalkka on yli 4200 niin, ett\xE4 j\xE4rjestet\xE4\xE4n tulos keskiarvopalkan mukaan</li></ul><div class="language-bash"><pre><code><span class="token comment"># oletuksena suunta on ASC eli nouseva, jos sit\xE4 ei erikseen m\xE4\xE4ritet\xE4</span>
<span class="token comment"># nouseva tarkoittaa sit\xE4, ett\xE4 pienin palkka on ylimp\xE4n\xE4 ja suurin alimpana</span>
<span class="token comment"># ao. kysely:</span>
SELECT department_id, AVG<span class="token punctuation">(</span>salary<span class="token punctuation">)</span> AS avg_salary FROM employees GROUP BY department_id HAVING AVG<span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">4200</span> ORDER BY avg_salary

<span class="token comment"># on siis sama kuin t\xE4m\xE4</span>
SELECT department_id, AVG<span class="token punctuation">(</span>salary<span class="token punctuation">)</span> AS avg_salary FROM employees GROUP BY department_id HAVING AVG<span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">4200</span> ORDER BY avg_salary ASC

<span class="token comment"># vaihdetaan suunta laskevaksi, eli niin, ett\xE4 suurin palkka on ylh\xE4\xE4ll\xE4 ja pienin alhaalla</span>
SELECT department_id, AVG<span class="token punctuation">(</span>salary<span class="token punctuation">)</span> AS avg_salary FROM employees GROUP BY department_id HAVING AVG<span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">4200</span> ORDER BY avg_salary DESC
</code></pre></div><h3 id="insert" tabindex="-1">INSERT <a class="header-anchor" href="#insert" aria-hidden="true">#</a></h3><ul><li>INSERT-lauseke lis\xE4\xE4 tietokantatauluun rivin</li></ul><p><img src="`+y+'" alt="mysql"></p><ul><li><p>Huomaa, ett\xE4 users-taulussa on oikeasti 3 saraketta</p><ul><li>id (kokonaisluku)</li><li>first_name (merkkijono)</li><li>last_name (merkkijono)</li></ul></li><li><p>insertist\xE4 kuitenkin puuttuu id-sarake. Sit\xE4 ei tarvitse erikseen merkata, koska id on AUTO_INCREMENT-sarake, joten se lis\xE4t\xE4\xE4n automaattisesti</p></li></ul><h3 id="delete" tabindex="-1">DELETE <a class="header-anchor" href="#delete" aria-hidden="true">#</a></h3><ul><li>DELETE-lauseke poistaa tietokantataulusta rivin / useita rivej\xE4 <ul><li>DELETE-lausekkeen rajaava ehto (WHERE m\xE4\xE4r\xE4\xE4 sen kuinka monta rivi\xE4 poistetaan. Jos se j\xE4tet\xE4\xE4n pois, poistetaan taulusta kaikki rivit)</li></ul></li></ul><p><img src="'+j+'" alt="mysql"></p><h3 id="update" tabindex="-1">UPDATE <a class="header-anchor" href="#update" aria-hidden="true">#</a></h3><ul><li>UPDATE lauseke p\xE4ivitt\xE4\xE4 olemassa olevan rivin / useita rivej\xE4 tietokannasta annetuilla ehdoilla</li></ul><p><img src="'+E+`" alt="mysql"></p><h3 id="alikysely-subquery" tabindex="-1">ALIKYSELY (SUBQUERY) <a class="header-anchor" href="#alikysely-subquery" aria-hidden="true">#</a></h3><p>Alikyselyll\xE4 tarkoitetaan kysely\xE4, joka on toisen kyselyn sis\xE4ll\xE4. On suositeltavaa k\xE4ytt\xE4\xE4 JOINeja alikyselyjen sijasta silloin, kun se on mahdollista.</p><ul><li>Tarvitset alikysely\xE4 esim. silloin, kun tarvitset rajaavana WHERE-ehdossa jonkun koostefunktion tuloksen</li></ul><div class="language-bash"><pre><code>    SELECT first_name FROM employees WHERE salary <span class="token operator">&gt;</span> <span class="token punctuation">(</span>SELECT AVG<span class="token punctuation">(</span>salary<span class="token punctuation">)</span> FROM employees<span class="token punctuation">)</span>
</code></pre></div><h3 id="tehtavat-2-palautettava" tabindex="-1">TEHT\xC4V\xC4T 2 (palautettava) <a class="header-anchor" href="#tehtavat-2-palautettava" aria-hidden="true">#</a></h3><div class="info custom-block"><p class="custom-block-title">Tietokanta</p><p>Harjoitukset tehd\xE4\xE4n tiedonhallinta_harjoitus2-tietokantaan Hae se git-repositoriosta ja tuo PHPMyAdminiin</p></div><ul><li><p>2.1 Tee kysely, jolla lasket keskiarvopalkan</p><ul><li>Tuloksena yksi rivi, yksi sarake</li></ul></li><li><p>2.2. Tee kysely, jolla haet pienimm\xE4n palkan</p><ul><li>Tuloksena yksi rivi, yksi sarake</li></ul></li><li><p>2.3 Tee kysely, jolla haet suurimman palkan</p><ul><li>Tuloksena yksi rivi, yksi sarake</li></ul></li><li><p>2.4 Tee kysely, jolla haet suurimman palkan sovelluskehitys-osastolta.</p><ul><li>Kyselyss\xE4 pit\xE4\xE4 k\xE4ytt\xE4\xE4 INNER JOINia ja osaston nime\xE4 hakuehdossa</li><li>Tuloksena riitt\xE4\xE4 yksi rivi, yksi sarake</li></ul></li><li><p>2.5 Tee kysely, jolla haet pienimm\xE4n palkan palkat-osastolta</p><ul><li>Kyselyss\xE4 pit\xE4\xE4 k\xE4ytt\xE4\xE4 INNER JOINia ja osaston nime\xE4 hakuehdossa</li><li>Tuloksena riitt\xE4\xE4 yksi rivi, yksi sarake</li></ul></li><li><p>2.6 Tee kysely, jolla haet keskiarvotpalkat osastoittain</p><ul><li>Tuloksena riitt\xE4\xE4 yksi sarake</li></ul></li><li><p>2.7 Tee INSERT-kysely, jolla lis\xE4\xE4t uuden osaston</p><ul><li>Osaston nimi pit\xE4\xE4 olla <i>TK-osasto</i></li></ul></li><li><p>2.8 Tee kysely, jolla haet kaikkien ty\xF6ntekij\xF6iden etu -ja sukunimet sek\xE4 osaston nimen jolla he ty\xF6skentelev\xE4t</p><ul><li>K\xE4yt\xE4 t\xE4ss\xE4 INNER JOINia</li><li>Tuloksen sarakkeet: employees.first_name, employees.last_name ja <a href="http://departments.name" target="_blank" rel="noopener noreferrer">departments.name</a></li></ul></li><li><p>2.9 Tee kysely, jolla haet niiden osastojen nimet, joilla ei ty\xF6skentele ket\xE4\xE4n</p><ul><li>Ainoa osasto, jolla ei ty\xF6skentele ket\xE4\xE4n on 2.7 teht\xE4v\xE4ss\xE4 lis\xE4tty TK-osasto</li><li>T\xE4m\xE4n voit tehd\xE4 k\xE4ytt\xE4en LEFT JOInia employees ja departments-taulujen v\xE4lill\xE4</li><li>K\xE4yt\xE4 rajaavana hakuehtona IS-filteri\xE4</li><li>Tuloksena riitt\xE4\xE4 yksi rivi, yksi sarake (name)</li></ul></li><li><p>2.10 Tee kysely, jolla haet niiden osastojen keskiarvopalkat, joiden keskiarvopalkka on yli 3500</p><ul><li>Tuloksena riitt\xE4\xE4 yksi sarake (keskiarvopalkka)</li></ul></li><li><p>2.11 Tee kysely, jolla haet ty\xF6ntekij\xF6iden lukum\xE4\xE4r\xE4n osastoittain</p><ul><li>Tuloksena riitt\xE4\xE4 yksi sarake (ty\xF6ntekij\xF6iden lukum\xE4\xE4r\xE4)</li></ul></li><li><p>2.12 Tee kysely, jolla haet kaikki ne ty\xF6ntekij\xE4t,joiden palkka on alle keskiarvopalkan</p><ul><li>K\xE4yt\xE4 alikysely\xE4</li><li>Tulokseen voi hakea kaikki employees-taulun sarakkeet</li></ul></li><li><p>2.13 Tee kysely, jolla haet kaikki ty\xF6ntekj\xE4t, joiden palkka on alle oman osaston keskiarvopalkan</p><ul><li>K\xE4yt\xE4 alikysely\xE4</li><li>Tulokseen voi hakea kaikki employees-taulun sarakkeet</li></ul></li><li><p>2.14 Tee kysely, jolla haet ty\xF6ntekij\xE4n palkan ja listaat viereen keskiarvopalkan</p><ul><li>Tulokseen riitt\xE4\xE4 kaksi saraketta per rivi</li></ul></li><li><p>2.15 Tee kysely, jolla haet ty\xF6ntekij\xE4n palkan ja listaat viereen h\xE4nen osastonsa alimman palkan</p><ul><li>Tulokseen riitt\xE4\xE4 kaksi saraketta per rivi</li></ul></li></ul><h2 id="tehtavat-3-palautettava" tabindex="-1">TEHT\xC4V\xC4T 3 (palautettava) <a class="header-anchor" href="#tehtavat-3-palautettava" aria-hidden="true">#</a></h2><div class="info custom-block"><p class="custom-block-title">Tietokanta</p><p>Harjoitukset tehd\xE4\xE4n tiedonhallinta_harjoitus2-tietokantaan Hae se git-repositoriosta ja tuo PHPMyAdminiin</p><p>Palauta teht\xE4v\xE4t t\xE4ss\xE4 muodossa</p><ul><li><p>3.1 SELECT....;</p></li><li><p>3.2 SELECT ....;</p></li><li><p>palauta vain yksi vastaus / kysymys</p></li><li><p>\xE4l\xE4 k\xE4yt\xE4 vastauksen edess\xE4 viivaa (-)</p></li><li><p>\xE4l\xE4 laita kysymyst\xE4 mukaan vastaukseen. Tied\xE4n, mit\xE4 miss\xE4kin teht\xE4v\xE4ss\xE4 halutaan</p></li></ul><p>Ole tarkkana, ett\xE4 palautat vain ne tiedot, joita pyydet\xE4\xE4n. Jos haettavia sarakkeita ei erikseen mainita, voit palauttaa kaikki (*)</p><p>Jokainen v\xE4\xE4rin muotoiltu vastaus arvioidaan v\xE4\xE4r\xE4n\xE4</p><p>T\xE4st\xE4 paketista on jaossa enint\xE4\xE4n 9 pistett\xE4. Oikein tehdyst\xE4 kyselyst\xE4 saa 1 pisteen, muuten 0</p></div><ul><li><p>3.1 Tee kysely, joka laskee jokaisen ty\xF6ntekij\xE4n i\xE4n (voit k\xE4ytt\xE4\xE4 sarakkeesta aliasta age) date_of_birth-sarakkeen perusteella</p><ul><li>listaa ty\xF6ntekij\xE4st\xE4 kaikki tiedot employees.* ja lis\xE4ksi viel\xE4 age-sarake</li></ul></li><li><p>3.2 Tee kysely, jolla lasket keskiarvoi\xE4n kaikista employees-taulun riveist\xE4</p></li></ul><ul><li>yksi rivi ja sarake riitt\xE4\xE4</li></ul><ul><li><p>3.3 Tee kysely, jolla haet nuorimman ty\xF6ntekij\xE4n</p><ul><li>yksi rivi ja sarake riitt\xE4\xE4</li></ul></li><li><p>3.4 Tee kysely, jolla haet vanhimman ty\xF6ntekij\xE4n</p><ul><li>yksi rivi ja sarake riitt\xE4\xE4</li></ul></li><li><p>3.5 Tee kysely, jolla haet nuorimmat ty\xF6ntekij\xE4t osastoittain</p><ul><li>yksi sarake riitt\xE4\xE4</li><li>rivej\xE4 on yht\xE4 monta kuin osastoakin</li></ul></li><li><p>3.6 Tee kysely, jolla haet ty\xF6ntekij\xF6iden lukum\xE4\xE4r\xE4n ikien mukaan ryhmiteltyn\xE4</p><ul><li>sarakkeet <ul><li>count (lukum\xE4\xE4r\xE4)</li><li>age (ik\xE4)</li></ul></li></ul><p>T\xE4ss\xE4 esimerkki siit\xE4, milt\xE4 tulos n\xE4ytt\xE4\xE4:</p><p><img src="`+g+'" alt="mysql"></p></li><li><p>3.7 Tee kysely, jolla haet, 30-vuotiaiden lukum\xE4\xE4r\xE4n palkat-osastolla</p><ul><li>tuloksena yksi rivi, 3 saraketta <ul><li><img src="'+T+'" alt="mysql"></li></ul></li><li>k\xE4yt\xE4 rajaavina ehtoina osaston nime\xE4 <a href="http://departments.name" target="_blank" rel="noopener noreferrer">departments.name</a> ja age-aliasta (age lasketaan date_of_birth-sarakkeen arvosta)</li><li>departments-taulun yhdist\xE4miseen tarvitset INNER JOINia</li><li>koska age on funktion tulos, siin\xE4 pit\xE4\xE4 k\xE4ytt\xE4\xE4 HAVING-lauseketta</li><li>group by:ssa riitt\xE4\xE4 pelkk\xE4 age, koska WHERE:ssa rajataan jo muut osastot pois</li></ul></li><li><p>3.8 Tee kysely, jolla p\xE4ivit\xE4t 2.7 teht\xE4v\xE4ss\xE4 lis\xE4tyn TK-osaston nimen TKI-osastoksi * k\xE4yt\xE4 rajaavana ehtona name-saraketta * idt\xE4 ei tarvitse k\xE4ytt\xE4\xE4, koska name-sarake on yksil\xF6llinen (UNIQUE)</p></li><li><p>3.9 Tee kysely, jolla poistat TKI-osaston</p><ul><li>k\xE4yt\xE4 poistossa rajaavana ehtona name-saraketta.</li></ul></li></ul>',246),O=[f];function N(I,L,A,R,S,M){return i(),t("div",null,O)}var H=a(b,[["render",N]]);export{C as __pageData,H as default};
